{
  "version": 3,
  "sources": [
    "Manager.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "type",
    "extend",
    "core",
    "Object",
    "construct",
    "__objects",
    "event",
    "Registration",
    "addListener",
    "document",
    "documentElement",
    "__onPointerDown",
    "bom",
    "Element",
    "window",
    "hideAll",
    "members",
    "add",
    "obj",
    "Environment",
    "get",
    "ui",
    "popup",
    "Popup",
    "Error",
    "push",
    "__updateIndexes",
    "remove",
    "lang",
    "Array",
    "l",
    "length",
    "current",
    "getAutoHide",
    "exclude",
    "min",
    "i",
    "setZIndex",
    "e",
    "target",
    "Widget",
    "getWidgetByElement",
    "getTarget",
    "reg",
    "contains",
    "destruct",
    "removeListener",
    "_disposeArray",
    "Manager"
  ],
  "mappings": "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",
  "file": "Manager.js",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Sebastian Werner (wpbasti)\n     * Andreas Ecker (ecker)\n\n************************************************************************ */\n\n/**\n * This singleton is used to manager multiple instances of popups and their\n * state.\n */\nqx.Class.define(\"qx.ui.popup.Manager\",\n{\n  type : \"singleton\",\n  extend : qx.core.Object,\n\n\n\n  /*\n  *****************************************************************************\n     CONSTRUCTOR\n  *****************************************************************************\n  */\n\n  construct : function()\n  {\n    this.base(arguments);\n\n    // Create data structure, use an array because order matters [BUG #4323]\n    this.__objects = [];\n\n    // Register pointerdown handler\n    qx.event.Registration.addListener(document.documentElement, \"pointerdown\",\n                                      this.__onPointerDown, this, true);\n\n    // Hide all popups on window blur\n    qx.bom.Element.addListener(window, \"blur\", this.hideAll, this);\n  },\n\n\n\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n\n  members :\n  {\n    __objects : null,\n\n\n    /**\n     * Registers a visible popup.\n     *\n     * @param obj {qx.ui.popup.Popup} The popup to register\n     */\n    add : function(obj)\n    {\n      if (qx.core.Environment.get(\"qx.debug\"))\n      {\n        if (!(obj instanceof qx.ui.popup.Popup)) {\n          throw new Error(\"Object is no popup: \" + obj);\n        }\n      }\n\n      this.__objects.push(obj);\n      this.__updateIndexes();\n    },\n\n\n    /**\n     * Removes a popup from the registry\n     *\n     * @param obj {qx.ui.popup.Popup} The popup which was excluded\n     */\n    remove : function(obj)\n    {\n      if (qx.core.Environment.get(\"qx.debug\"))\n      {\n        if (!(obj instanceof qx.ui.popup.Popup)) {\n          throw new Error(\"Object is no popup: \" + obj);\n        }\n      }\n\n      qx.lang.Array.remove(this.__objects, obj);\n      this.__updateIndexes();\n    },\n\n\n    /**\n     * Excludes all currently open popups,\n     * except those with {@link qx.ui.popup.Popup#autoHide} set to false.\n     */\n    hideAll : function()\n    {\n      var l = this.__objects.length, current = {};\n\n      while (l--) {\n        current = this.__objects[l];\n        if (current.getAutoHide()) {\n          current.exclude();\n        }\n      }\n    },\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      INTERNAL HELPER\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Updates the zIndex of all registered items to push\n     * newly added ones on top of existing ones\n     *\n     */\n    __updateIndexes : function()\n    {\n      var min = 1e7;\n      for (var i = 0; i < this.__objects.length; i++) {\n        this.__objects[i].setZIndex(min++);\n      }\n    },\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      EVENT HANDLER\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Event handler for pointer down events\n     *\n     * @param e {qx.event.type.Pointer} Pointer event object\n     */\n    __onPointerDown : function(e)\n    {\n      // Get the corresponding widget of the target since we are dealing with\n      // DOM elements here. This is necessary because we have to be aware of\n      // Inline applications which are not covering the whole document and\n      // therefore are not able to get all pointer events when only the\n      // application root is monitored.\n      var target = qx.ui.core.Widget.getWidgetByElement(e.getTarget());\n\n      var reg = this.__objects;\n      for (var i = 0; i < reg.length; i++)\n      {\n        var obj = reg[i];\n\n        if (!obj.getAutoHide() || target == obj || qx.ui.core.Widget.contains(obj, target)) {\n          continue;\n        }\n\n        obj.exclude();\n      }\n    }\n  },\n\n\n\n  /*\n  *****************************************************************************\n     DESTRUCTOR\n  *****************************************************************************\n  */\n\n  destruct : function()\n  {\n    qx.event.Registration.removeListener(document.documentElement, \"pointerdown\",\n                                         this.__onPointerDown, this, true);\n\n    this._disposeArray(\"__objects\");\n  }\n});\n"
  ]
}