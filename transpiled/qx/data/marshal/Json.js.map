{
  "version": 3,
  "sources": [
    "Json.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "implement",
    "data",
    "marshal",
    "IMarshaler",
    "construct",
    "delegate",
    "__delegate",
    "statics",
    "$$instance",
    "createModel",
    "includeBubbleEvents",
    "Json",
    "toClass",
    "toModel",
    "members",
    "__jsonToHash",
    "keys",
    "sort",
    "join",
    "__jsonToBestHash",
    "hash",
    "bubbleClassHash",
    "bubbleClassName",
    "isDefined",
    "__toClass",
    "parentProperty",
    "depth",
    "lang",
    "Type",
    "isObject",
    "$$isString",
    "Array",
    "getClass",
    "i",
    "length",
    "__ignore",
    "key",
    "getModelClass",
    "properties",
    "__disposeItem",
    "getPropertyMapping",
    "replace",
    "Environment",
    "get",
    "assertTrue",
    "test",
    "nullable",
    "event",
    "String",
    "firstUp",
    "apply",
    "getValidationRule",
    "rule",
    "validate",
    "getModelSuperClass",
    "superClass",
    "mixins",
    "getModelMixins",
    "delegateMixins",
    "isArray",
    "push",
    "MEventBubbling",
    "newClass",
    "include",
    "item",
    "isDisposed",
    "dispose",
    "__createInstance",
    "delegateClass",
    "className",
    "clazz",
    "getByName",
    "noBubbleClassName",
    "Error",
    "del",
    "ignore",
    "__toModel",
    "arrayClass",
    "getArrayClass",
    "customArrayClass",
    "array",
    "setAutoDisposeItems",
    "model",
    "propertyName",
    "propertyNameReplaced",
    "warn",
    "setterName"
  ],
  "mappings": "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",
  "file": "Json.js",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2009 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Martin Wittemann (martinwittemann)\n\n************************************************************************ */\n\n/**\n * This class is responsible for converting json data to class instances\n * including the creation of the classes.\n * To retrieve the native data of created models use the methods\n *   described in {@link qx.util.Serializer}.\n */\nqx.Class.define(\"qx.data.marshal.Json\",\n{\n  extend : qx.core.Object,\n  implement : [qx.data.marshal.IMarshaler],\n\n  /**\n   * @param delegate {Object} An object containing one of the methods described\n   *   in {@link qx.data.marshal.IMarshalerDelegate}.\n   */\n  construct : function(delegate)\n  {\n    this.base(arguments);\n\n    this.__delegate = delegate;\n  },\n\n  statics :\n  {\n    $$instance : null,\n\n    /**\n     * Creates a qooxdoo object based on the given json data. This function\n     * is just a static wrapper. If you want to configure the creation\n     * process of the class, use {@link qx.data.marshal.Json} directly.\n     *\n     * @param data {Object} The object for which classes should be created.\n     * @param includeBubbleEvents {Boolean} Whether the model should support\n     *   the bubbling of change events or not.\n     *\n     * @return {qx.core.Object} An instance of the corresponding class.\n     */\n    createModel : function(data, includeBubbleEvents) {\n      // singleton for the json marshaler\n      if (this.$$instance === null) {\n        this.$$instance = new qx.data.marshal.Json();\n      }\n      // be sure to create the classes first\n      this.$$instance.toClass(data, includeBubbleEvents);\n      // return the model\n      return this.$$instance.toModel(data);\n    }\n  },\n\n\n  members :\n  {\n    __delegate : null,\n\n\n    /**\n     * Converts a given object into a hash which will be used to identify the\n     * classes under the namespace <code>qx.data.model</code>.\n     *\n     * @param data {Object} The JavaScript object from which the hash is\n     *   required.\n     * @param includeBubbleEvents {Boolean?false} Whether the model should\n     *   support the bubbling of change events or not.\n     * @return {String} The hash representation of the given JavaScript object.\n     */\n    __jsonToHash : function (data, includeBubbleEvents)\n    {\n      return Object.keys(data).sort().join('\"')\n           + (includeBubbleEvents===true ? \"♥\" : \"\");\n    },\n\n\n    /**\n     * Get the \"most enhanced\" hash for a given object.  That is the hash for\n     * the class that is most feature rich in respect of the bubble event\n     * feature. If there are two equal classes available (defined), one with\n     * and one without the bubble event feature, this method will return the\n     * hash of the class that includes the bubble event.\n     *\n     * @param data {Object} The JavaScript object from which the hash is\n     *   required.\n     * @param includeBubbleEvents {Boolean} Whether the preferred model should\n     *   support the bubbling of change events or not.\n     *   If <code>null</code>, an automatic selection will take place which\n     *   selects the \"best\" model currently available.\n     * @return {String} The hash representation of the given JavaScript object.\n     */\n    __jsonToBestHash : function (data, includeBubbleEvents)\n    {\n      // forced mode?\n      //\n      if (includeBubbleEvents === true) {\n        return this.__jsonToHash(data, true);\n      }\n      if (includeBubbleEvents === false) {\n        return this.__jsonToHash(data, false);\n      }\n\n      // automatic mode!\n      //\n      var hash = this.__jsonToHash(data); // without bubble event feature\n      var bubbleClassHash = hash + \"♥\";   // with bubble event feature\n      var bubbleClassName = \"qx.data.model.\" + bubbleClassHash;\n\n      // In case there's a class with bubbling, we *always* prefer that one!\n      return qx.Class.isDefined(bubbleClassName) ? bubbleClassHash : hash;\n    },\n\n\n    /**\n     * Creates for the given data the needed classes. The classes contain for\n     * every key in the data a property. The classname is always the prefix\n     * <code>qx.data.model</code> and the hash of the data created by\n     * {@link #__jsonToHash}. Two objects containing the same keys will not\n     * create two different classes. The class creation process also supports\n     * the functions provided by its delegate.\n     *\n     * Important, please keep in mind that only valid JavaScript identifiers\n     * can be used as keys in the data map. For convenience '-' in keys will\n     * be removed (a-b will be ab in the end).\n     *\n     * @see qx.data.store.IStoreDelegate\n     *\n     * @param data {Object} The object for which classes should be created.\n     * @param includeBubbleEvents {Boolean} Whether the model should support\n     *   the bubbling of change events or not.\n     */\n    toClass: function(data, includeBubbleEvents) {\n      this.__toClass(data, includeBubbleEvents, null, 0);\n    },\n\n\n    /**\n     * Implementation of {@link #toClass} used for recursion.\n     *\n     * @param data {Object} The object for which classes should be created.\n     * @param includeBubbleEvents {Boolean} Whether the model should support\n     *   the bubbling of change events or not.\n     * @param parentProperty {String|null} The name of the property the\n     *   data will be stored in.\n     * @param depth {Number} The depth of the data relative to the data's root.\n     */\n    __toClass : function(data, includeBubbleEvents, parentProperty, depth) {\n      // break on all primitive json types and qooxdoo objects\n      if (\n        !qx.lang.Type.isObject(data)\n        || !!data.$$isString // check for localized strings\n        || data instanceof qx.core.Object\n      ) {\n        // check for arrays\n        if (data instanceof Array || qx.Bootstrap.getClass(data) == \"Array\") {\n          for (var i = 0; i < data.length; i++) {\n            this.__toClass(data[i], includeBubbleEvents, parentProperty + \"[\" + i + \"]\", depth+1);\n          }\n        }\n\n        // ignore arrays and primitive types\n        return;\n      }\n\n      var hash = this.__jsonToHash(data, includeBubbleEvents);\n\n      // ignore rules\n      if (this.__ignore(hash, parentProperty, depth)) {\n        return;\n      }\n\n      // check for the possible child classes\n      for (var key in data) {\n        this.__toClass(data[key], includeBubbleEvents, key, depth+1);\n      }\n\n      // class already exists\n      if (qx.Class.isDefined(\"qx.data.model.\" + hash)) {\n        return;\n      }\n\n      // class is defined by the delegate\n      if (\n        this.__delegate\n        && this.__delegate.getModelClass\n        && this.__delegate.getModelClass(hash, data, parentProperty, depth) != null\n      ) {\n        return;\n      }\n\n      // create the properties map\n      var properties = {};\n      // include the disposeItem for the dispose process.\n      var members = {__disposeItem : this.__disposeItem};\n      for (var key in data) {\n        // apply the property names mapping\n        if (this.__delegate && this.__delegate.getPropertyMapping) {\n          key = this.__delegate.getPropertyMapping(key, hash);\n        }\n\n        // strip the unwanted characters\n        key = key.replace(/-|\\.|\\s+/g, \"\");\n        // check for valid JavaScript identifier (leading numbers are ok)\n        if (qx.core.Environment.get(\"qx.debug\")) {\n          this.assertTrue((/^[$0-9A-Za-z_]*$/).test(key),\n          \"The key '\" + key + \"' is not a valid JavaScript identifier.\");\n        }\n\n        properties[key] = {};\n        properties[key].nullable = true;\n        properties[key].event = \"change\" + qx.lang.String.firstUp(key);\n        // bubble events\n        if (includeBubbleEvents) {\n          properties[key].apply = \"_applyEventPropagation\";\n        }\n        // validation rules\n        if (this.__delegate && this.__delegate.getValidationRule) {\n          var rule = this.__delegate.getValidationRule(hash, key);\n          if (rule) {\n            properties[key].validate = \"_validate\" + key;\n            members[\"_validate\" + key] = rule;\n          }\n        }\n      }\n\n      // try to get the superclass, qx.core.Object as default\n      if (this.__delegate && this.__delegate.getModelSuperClass) {\n        var superClass =\n          this.__delegate.getModelSuperClass(hash, parentProperty, depth) || qx.core.Object;\n      } else {\n        var superClass = qx.core.Object;\n      }\n\n      // try to get the mixins\n      var mixins = [];\n      if (this.__delegate && this.__delegate.getModelMixins) {\n        var delegateMixins = this.__delegate.getModelMixins(hash, parentProperty, depth);\n        // check if its an array\n        if (!qx.lang.Type.isArray(delegateMixins)) {\n          if (delegateMixins != null) {\n            mixins = [delegateMixins];\n          }\n        } else {\n          mixins = delegateMixins;\n        }\n      }\n\n      // include the mixin for the event bubbling\n      if (includeBubbleEvents) {\n        mixins.push(qx.data.marshal.MEventBubbling);\n      }\n\n      // create the map for the class\n      var newClass = {\n        extend : superClass,\n        include : mixins,\n        properties : properties,\n        members : members\n      };\n\n      qx.Class.define(\"qx.data.model.\" + hash, newClass);\n    },\n\n\n    /**\n     * Helper for disposing items of the created class.\n     *\n     * @param item {var} The item to dispose.\n     */\n    __disposeItem : function(item) {\n      if (!(item instanceof qx.core.Object)) {\n        // ignore all non objects\n        return;\n      }\n      // ignore already disposed items (could happen during shutdown)\n      if (item.isDisposed()) {\n        return;\n      }\n      item.dispose();\n    },\n\n\n    /**\n     * Creates an instance for the given data hash.\n     *\n     * @param hash {String} The hash of the data for which an instance should\n     *   be created.\n     * @param parentProperty {String|null} The name of the property the data\n     *   will be stored in.\n     * @param depth {Number} The depth of the object relative to the data root.\n     * @param data {Map} The data for which an instance should be created.\n     * @return {qx.core.Object} An instance of the corresponding class.\n     */\n    __createInstance : function (hash, data, parentProperty, depth)\n    {\n      var delegateClass;\n      // get the class from the delegate\n      if (this.__delegate && this.__delegate.getModelClass) {\n        delegateClass = this.__delegate.getModelClass(hash, data, parentProperty, depth);\n      }\n      if (delegateClass != null) {\n        return (new delegateClass());\n      } else {\n        var className = \"qx.data.model.\" + hash;\n        var clazz = qx.Class.getByName(className);\n        if (!clazz)\n        {\n          // Extra check for possible bubble-event feature inconsistency\n          var noBubbleClassName = className.replace(\"♥\", \"\");\n          if (qx.Class.getByName(noBubbleClassName))\n          {\n            throw new Error( \"Class '\" + noBubbleClassName + \"' found, \" +\n                             \"but it does not support changeBubble event.\" );\n          }\n          throw new Error(\"Class '\" + className + \"' could not be found.\");\n        }\n        return (new clazz());\n      }\n    },\n\n\n    /**\n     * Helper to decide if the delegate decides to ignore a data set.\n     * @param hash {String} The property names.\n     * @param parentProperty {String|null} The name of the property the data\n     *   will be stored in.\n     * @param depth {Number} The depth of the object relative to the data root.\n     * @return {Boolean} <code>true</code> if the set should be ignored\n     */\n    __ignore : function(hash, parentProperty, depth) {\n      var del = this.__delegate;\n      return del && del.ignore && del.ignore(hash, parentProperty, depth);\n    },\n\n\n    /**\n     * Creates for the given data the needed models. Be sure to have the classes\n     * created with {@link #toClass} before calling this method. The creation\n     * of the class itself is delegated to the {@link #__createInstance} method,\n     * which could use the {@link qx.data.store.IStoreDelegate} methods, if\n     * given.\n     *\n     * @param data {Object} The object for which models should be created.\n     * @param includeBubbleEvents {Boolean?null} Whether the model should\n     *   support the bubbling of change events or not.\n     *   If omitted or <code>null</code>, an automatic selection will take place\n     *   which selects the \"best\" model currently available.\n     * @return {qx.core.Object} The created model object.\n     */\n    toModel : function (data, includeBubbleEvents) {\n      return this.__toModel(data, includeBubbleEvents, null, 0);\n    },\n\n\n    /**\n     * Implementation of {@link #toModel} used for recursion.\n     *\n     * @param data {Object} The object for which models should be created.\n     * @param includeBubbleEvents {Boolean|null} Whether the model should\n     *   support the bubbling of change events or not.\n     *   If <code>null</code>, an automatic selection will take place which\n     *   selects the \"best\" model currently available.\n     * @param parentProperty {String|null} The name of the property the\n     *   data will be stored in.\n     * @param depth {Number} The depth of the data relative to the data's root.\n     * @return {qx.core.Object} The created model object.\n     */\n    __toModel : function (data, includeBubbleEvents, parentProperty, depth)\n    {\n      var isObject = qx.lang.Type.isObject(data);\n      var isArray = data instanceof Array || qx.Bootstrap.getClass(data) == \"Array\";\n\n      if (\n        (!isObject && !isArray)\n        || !!data.$$isString // check for localized strings\n        || data instanceof qx.core.Object\n      ) {\n        return data;\n\n      // ignore rules\n      } else if (this.__ignore(this.__jsonToBestHash(data, includeBubbleEvents), parentProperty, depth)) {\n        return data;\n\n      } else if (isArray) {\n        var arrayClass = qx.data.Array;\n        if (this.__delegate && this.__delegate.getArrayClass) {\n          var customArrayClass = this.__delegate.getArrayClass(parentProperty, depth);\n          arrayClass = customArrayClass || arrayClass;\n        }\n\n        var array = new arrayClass();\n        // set the auto dispose for the array\n        array.setAutoDisposeItems(true);\n\n        for (var i = 0; i < data.length; i++) {\n          array.push(this.__toModel(data[i], includeBubbleEvents, parentProperty + \"[\" + i + \"]\", depth+1));\n        }\n        return array;\n\n      } else if (isObject) {\n        // create an instance for the object\n        var hash = this.__jsonToBestHash(data, includeBubbleEvents);\n        var model = this.__createInstance(hash, data, parentProperty, depth);\n\n        // go threw all element in the data\n        for (var key in data) {\n          // apply the property names mapping\n          var propertyName = key;\n          if (this.__delegate && this.__delegate.getPropertyMapping) {\n            propertyName = this.__delegate.getPropertyMapping(key, hash);\n          }\n          var propertyNameReplaced = propertyName.replace(/-|\\.|\\s+/g, \"\");\n          // warn if there has been a replacement\n          if (\n            (qx.core.Environment.get(\"qx.debug\")) &&\n            qx.core.Environment.get(\"qx.debug.databinding\")\n          ) {\n            if (propertyNameReplaced != propertyName) {\n              this.warn(\n                \"The model contained an illegal name: '\" + key +\n                \"'. Replaced it with '\" + propertyName + \"'.\"\n              );\n            }\n          }\n          propertyName = propertyNameReplaced;\n          // only set the properties if they are available [BUG #5909]\n          var setterName = \"set\" + qx.lang.String.firstUp(propertyName);\n          if (model[setterName]) {\n            model[setterName](this.__toModel(data[key], includeBubbleEvents, key, depth+1));\n          }\n        }\n        return model;\n      }\n\n      throw new Error(\"Unsupported type!\");\n    }\n  }\n});\n"
  ]
}